#!/usr/bin/env bash
DIR="$(cd "$(dirname "$0")" && pwd)"

DC=(docker compose
  -f "$DIR/docker-compose.yml"
  -f "$DIR/docker-compose.extra.yml"
  -f "$DIR/docker-compose.custom.yml"
)

case "$1" in
  cli)
    shift
    exec "${DC[@]}" run --rm openclaw-cli "$@"
    ;;
  gw)
    shift
    exec "${DC[@]}" run --rm openclaw-gateway "$@"
    ;;
  rebuild)
    shift
    docker build "$@" -t "${OPENCLAW_IMAGE:-openclaw:local}" "$DIR" && "${DC[@]}" up -d
    ;;
  logs)
    shift
    exec "${DC[@]}" logs -f "$@"
    ;;
  logs-gw)
    shift
    exec "${DC[@]}" logs -f openclaw-gateway "$@"
    ;;
  logs-cli)
    shift
    exec "${DC[@]}" logs -f openclaw-cli "$@"
    ;;
  *)
    exec "${DC[@]}" "$@"
    ;;
esac
